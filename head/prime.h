#include<math.h>
#include<stdlib.h>
#include<string.h>

int * findprime(int n,int *s){
int *fin,*a;
int sq,e=n;
a=(int *)malloc(sizeof(int)*(n-2));
sq=(int)sqrt((double)n);
for(int i=2;i<n;i++)
a[i-2]=i;

for(int i=0;i<=sq-2;i++){
int x=a[i];
if(x!=0){
for(int j=i;j<(int)ceil((double)n/x)-2;j++){
if(a[(j+2)*x-2]!=0)
{a[(j+2)*x-2]=0;
e--;}
}}}

fin=(int *)malloc(sizeof(int)*e-1);
*s=e-2;
*((char *)fin+sizeof(int)*e+1)='\0';
e=0;

for(int i=0;i<n;i++)
if(a[i]!=0){
fin[e]=a[i];
e++;}
free(a);
return fin;
}
